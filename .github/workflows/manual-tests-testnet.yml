name: '[Manual] Test Testnet'
on:
  workflow_dispatch:
    inputs:
      ignore-scripts:
        description: 'Ignore scripts'
        type: boolean
        default: false
      fail-fast:
        description: 'Fail fast'
        type: boolean
        default: false

jobs:
  tests:
    name: Run test on ${{ matrix.node }} ${{ matrix.protocol }} ${{ matrix.version }}
    strategy:
      max-parallel: 1
      fail-fast: ${{ inputs.fail-fast }}
      matrix:
        protocol: [RPC, WS]
        node: [Juno, Pathfinder]
        version: [v0_7, v0_8]
        exclude:
          - version: v0_7
            protocol: WS

    uses: ./.github/workflows/_test.yml
    with:
      ignore-scripts: ${{ inputs.ignore-scripts }}
      protocol: ${{ matrix.protocol }}
      node: ${{ matrix.node }}
      version: ${{ matrix.version }}
    secrets: inherit
